<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equic="X-UA-Compatible" content="ie=edge">
    <title>truchiwoman</title>
    <link rel='icon' href='/static/trucha.png' type='image/png'>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/main.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>	    

	
<body>
    
    <div class="alert_container" >
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for cat, mess in messages %}
                <div class="alert alert-{{ cat }} alert-dismissible fade show" role="alert">
                <span>{{ mess }}</span>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% endfor %}                
            {% endif %}
        {% endwith %}
    </div>
    <div class="explainer" id="idea">
        <div class="text-idea" id="idearium" >
            {{content.text | safe}}
        </div>  
        <form  method="post" id="planeform">
            <textarea id="feed_message" name="user_feedback" placeholder="Nos tienes en ascuas..." minlength="50" required></textarea>
            <div class="btn-thanks" id="btn-thanks" >
     			<p class="gracias" id="gracias" >Mensaje recibido.</p>
     			<input type="image" form="planeform" src="/static/plane.png" value="Submit" class="plane-btn" id="plane_btn" autocomplete="off" />
            </div>  
        </form>      
    </div>
    
    <div class="salida_ex" id="salida_ex"> <img src="/static/icono_salida.png" style="width:75px; height:75px;"> </div>
    <div class="full_screen" id="full_screen" onclick="openFullscreen();" >
         <img src="/static/full_screen.png" style="width:70px; height:70px;">
    </div>
    <div class="reduce_screen" id="reduce_screen" onclick="closeFullscreen();" >
         <img src="/static/close_screen.png" style="width:70px; height:70px;">
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

    <script type="text/javascript">
        
        document.getElementById("salida_ex").onclick = function () {
            window.location.href = "index";
        };
        
       document.getElementById("plane_btn").onclick = function () {
            if (document.getElementById("feed_message").value.length >= 50){
               document.getElementById("gracias").style.visibility = "visible";
            }
           
       };     
       
       document.getElementById("planeform").submit(function(e){
            if($('#user_feedback').val().length < 50){
               e.preventdefault();
            }
        }); 
        
        function redirectMobileHandler() {
          const width = Math.max(document.clientWidth || 0, window.innerWidth || 0);
          if (width < 1000) {
              window.location.href = "small_screen";
          }
        }
        
        window.onload = redirectMobileHandler();
        window.onresize = () => redirectMobileHandler();

        // Using JavaScript to open the page in fullscreen mode
        var elem = document.documentElement;
        
        function openFullscreen() {
          if (elem.requestFullscreen) {
              elem.requestFullscreen();
              document.getElementById("reduce_screen").style.visibility = "visible";
              document.getElementById("full_screen").style.visibility = "hidden";
          } else if (elem.webkitRequestFullscreen) { 
              elem.webkitRequestFullscreen();
              document.getElementById("reduce_screen").style.visibility = "visible";
              document.getElementById("full_screen").style.visibility = "hidden";

          } else if (elem.msRequestFullscreen) { /* IE11 */
              elem.msRequestFullscreen();
              document.getElementById("reduce_screen").style.visibility = "visible";
              document.getElementById("full_screen").style.visibility = "hidden";
          }
        }
        
        function closeFullscreen() {
          if (document.exitFullscreen) {
              document.exitFullscreen();
              document.getElementById("reduce_screen").style.visibility = "hidden";
              document.getElementById("full_screen").style.visibility = "visible";
          } else if (document.webkitExitFullscreen) { /* Safari */
              document.webkitExitFullscreen();
              document.getElementById("reduce_screen").style.visibility = "hidden";
              document.getElementById("full_screen").style.visibility = "visible";
          } else if (document.msExitFullscreen) { /* IE11 */
              document.msExitFullscreen();
              document.getElementById("reduce_screen").style.visibility = "hidden";
              document.getElementById("full_screen").style.visibility = "visible";
          }
        }
 
    </script>

</body>

</html>
